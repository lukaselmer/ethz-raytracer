// Generated by CoffeeScript 1.6.3
var Camera;

Camera = (function() {
  function Camera(position, direction, upDirection, distance, fieldOfView, width, height) {
    this.position = position;
    this.direction = direction;
    this.upDirection = upDirection;
    this.distance = distance;
    this.fieldOfView = fieldOfView;
    this.width = width;
    this.height = height;
    this.calibrateCamera();
  }

  Camera.prototype.calibrateCamera = function() {
    this.direction = this.direction.toUnitVector();
    this.rightDirection = this.direction.cross(this.upDirection).toUnitVector();
    this.upDirection = this.rightDirection.cross(this.direction).toUnitVector();
    this.imagePaneHeight = 2 * Math.tan(this.fieldOfView / 2) * this.distance;
    this.imagePaneWidth = this.imagePaneHeight / this.height * this.width;
    this.imageCenter = this.position.add(this.direction.multiply(this.distance));
    this.imageTop = this.imageCenter.add(this.upDirection.multiply(this.imagePaneHeight / 2));
    this.imageBottom = this.imageCenter.add(this.upDirection.multiply(-1 * this.imagePaneHeight / 2));
    this.imageLeft = this.imageCenter.add(this.rightDirection.multiply(-1 * this.imagePaneWidth / 2));
    return this.imageRight = this.imageCenter.add(this.rightDirection.multiply(this.imagePaneWidth / 2));
  };

  Camera.prototype.getCenter = function() {
    return this.position.add(this.direction);
  };

  return Camera;

})();
